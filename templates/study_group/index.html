{% extends 'base.html' %}


{% block extra-styel %}
{% endblock %}

{% block content %}
<h3>좋아할만한 스터디를 골라봤어요!</h3>
<div class="row text-center">
    {% for study in studys %}
    <div class="mb-3 col-md-4 col-sm-6 p-2" style="cursor: pointer;">
        <div id="study" style="background-color: white; border-radius : 5px" onclick="viewStudy(`{{study.id}}`)">

            <img src="{{study.thumbnail_img.url}}" type="button" class="card-img-top" alt="...">
            <div class="card-body">
                <h5 class="card-title">{{ study.title }}</h5>
                <p class="card-text text-second">
                    작성자 : {{ study.user }}</br>
                    모집내용 : {{ study.content }}</br>
                    모집내용 대신 태그를 달?</br>
                    모집인원 : {{ study.headcount }}</br>
                </p>
            </div>
        </div>
    </div>


</div>
{% endfor %}
</div>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

<!-- Modal -->
<<<<<<< HEAD
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true" style="">
    <div class="modal-dialog modal-xl" style="border-radius: 10px; overflow: hidden;">
        <div class="modal-content">
            <div class="modal-body" style="padding: 0;">
                <div id="modal-head" class="p-3" style="height: 300px; ">
=======
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="1" aria-labelledby="staticBackdropLabel" aria-hidden="true" >
<div class="modal-dialog modal-xl" style="border-radius: 10px; overflow: hidden;">
    <div class="modal-content">
    <div class="modal-body" style="padding: 0;">
        <div id="modal-head" class="p-3" style="height: 300px; ">
>>>>>>> feature/user

                    <div class="align-bottom" style="align-self: end;">
                        <b>
                            <h3 id="study-title" class="text-start" style="color: white;"></h3>
                        </b>
                        <button id="status" type="button" class="btn btn-primary">Understood</button>
                        <button>star</button>
                        <span id="study-retio" class="p-1"
                            style="color: white; border: 1px solid white; border-radius: 20%;">몇명있는지 보여줄 예정,,,</span>
                        <!-- <span style="color: white;">태그들 있을 예정</span> -->
                    </div>
                    <i class="fas fa-times text-end" data-bs-dismiss="modal" aria-label="Close"
                        style="margin-left: auto; cursor: pointer; color: rgb(255, 255, 255); font-size: 30px;"></i>
                </div>
            </div>
            <div class="modal-footer" style="display: block; text-align: left;">
                <h6 id="author" class="text-secondary"></h6>

                <div id="content"></div>
            </div>
        </div>
    </div>
</div>



{% endblock%}

{% block extra-script %}


<script>

    function viewStudy(study_id) {

        const modal = document.getElementById('staticBackdrop');
        let tumbnailImg = document.getElementById('tumbnail-img');

        $.ajax({
            type: 'GET',

            data: {},

            url: `/api/studies/${study_id}/`,

            success: function (result) {
                console.log('성공:', result, result['thumbnail_img']);
                // $('#thumbnail-img').attr('src', result['thumbnail_img']);
                $('#modal-head').attr('style', `background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2)), url(${result['thumbnail_img']});
                                            background-position: center;
                                            background-size: cover;
                                            height : 300px;
                                            display: flex;
                `)
                $('#study-title').text(result['title'])
                $('#author').text(result['user'])
                $('#content').text(result['content'])

                let isStudent = result['is_student']
                let isAuthor = result['is_author']
                let sended = result['sended']
                let onOffLine = result['is_online']
                let isLike = result['is_like']
                let headCount = result['headcount']
                let nowCnt = result['now_cnt']

                $('#study-retio').text(`${nowCnt}/${headCount}`)

            },

        });

        $('#staticBackdrop').modal('show')

    }

</script>
{% endblock %}